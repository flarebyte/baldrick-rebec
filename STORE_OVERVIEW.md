Store Overview — Quick Guide

This document summarizes what a Store is in this project, how it’s used, and the CLI you’ll use to manage it. It’s written to be both AI- and human-friendly for fast onboarding.

Concept
- A Store is a named container of content for a specific role (e.g., user, qa, dev). Examples: ideas, blackboards, journals.
- Stores are role-scoped: the same name can exist in different roles, but must be unique within a role.
- Blackboards reference a Store by id; stickies live on a blackboard.

Key Fields
- id: UUID generated by the DB.
- name: Unique within a role (string).
- role: Role name the store belongs to.
- title: Human-friendly label.
- description, motivation, security, privacy, notes: Optional metadata (free text/markdown).
- type, scope, lifecycle: Optional categorization strings (free-form but commonly: type=blackboard|journal, scope=project|shared, lifecycle=weekly|monthly).
- tags: JSON map for key/value labels.
- created, updated: Timestamps (updated maintained by trigger on updates).

CLI Commands
- Create or update
  - rbc store set --name <NAME> --role <ROLE> [--title <TITLE>] [--description ...] [--motivation ...] [--security ...] [--privacy ...] [--notes ...] [--type ...] [--scope ...] [--lifecycle ...] [--tags k=v,...]
- Get one (JSON)
  - rbc store get --name <NAME> --role <ROLE>
- List (table or JSON)
  - rbc store list --role <ROLE> [--limit N] [--offset N] [--output table|json]
- Delete
  - rbc store delete --name <NAME> --role <ROLE> [--force] [--ignore-missing]

Typical Flows
1) Create a store for a role
   - rbc store set --name ideas-main --role user --title "Ideas" --type blackboard --scope project
2) Retrieve the store id (to attach a blackboard)
   - rbc store get --name ideas-main --role user
3) Create a blackboard linked to the store
   - rbc blackboard set --role user --store-id <STORE_ID>
4) List or cleanup
   - rbc store list --role user --output json
   - rbc store delete --name ideas-main --role user --force

Tips & Notes
- Choose stable names to avoid confusion across roles (e.g., ideas-main, blackboard-global).
- Use tags (k=v) for quick filtering/aggregation down the line.
- Security/privacy fields are Informational; they document intent and context, not access control.
- Stores are safe to upsert: running store set repeatedly updates fields and advances updated.

Integration Points
- Blackboards: blackboards.store_id → stores.id
- Higher-level test flows: script/test-all.mjs demonstrates store creation and usage.

Troubleshooting
- “not found” on get/delete: confirm role/name pair and spelling.
- Foreign key errors creating blackboards: ensure the referenced store id exists for your role.

That’s it—use stores as the anchor for role-scoped boards and content, then build on them with blackboards and stickies.

